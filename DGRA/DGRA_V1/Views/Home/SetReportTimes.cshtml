@using Newtonsoft.Json;
@using Microsoft.AspNetCore.Http;
@inject IHttpContextAccessor HttpContextAccessor
@model DGRA_V1.Models.DailyGenSummary

@{
    ViewData["Title"] = "Email Scheduling Time";
}
@{
    string solarSiteList = "";

    var usermodel = JsonConvert.DeserializeObject<UserAccess>(@HttpContextAccessor.HttpContext.Session.GetString("UserAccess"));

}
@for (int i = 0; i < @usermodel.access_list.Count; i++)
{

    if (@usermodel.access_list[i].page_type == 3 && @usermodel.access_list[i].site_type == 2)
    {
        solarSiteList += @usermodel.access_list[i].identity.ToString() + ",";
    }


}

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
<!-- Font Awesome -->
<link rel="stylesheet" href="~/Content/theme/plugins/fontawesome-free/css/all.min.css">
<!-- daterange picker -->
<link rel="stylesheet" href="~/Content/theme/plugins/daterangepicker/daterangepicker.css">
<!-- DataTables -->
<link rel="stylesheet" href="~/Content/theme/plugins/datatables-bs4/css/dataTables.bootstrap4.min.css">
<link rel="stylesheet" href="~/Content/theme/plugins/datatables-responsive/css/responsive.bootstrap4.min.css">
<link rel="stylesheet" href="~/Content/theme/plugins/datatables-buttons/css/buttons.bootstrap4.min.css">
<link rel="stylesheet" href="~/Content/theme/plugins/multiple-select/dist/multiple-select.min.css" />
<link href="~/Content/theme/dist/css/adminlte.css" rel="stylesheet" />
<!-- dropdown search -->
<link href="https://unpkg.com/multiple-select@1.5.2/dist/multiple-select.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
<script src="https://unpkg.com/multiple-select@1.5.2/dist/multiple-select.min.js"></script>


@*<style>
    .tbodydata {
        font-size: 12px;
    }

    .theaddata {
        font-size: 12px;
        font-weight: bold;
    }
</style>*@

<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper" style=" margin-left:0px;">

    <section class="content-header">
    </section>

    <section class="content">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title text-center">Email Scheduling Time</h3>
            </div>


            <div class="card-body">
                <div class="tab-content" id="custom-tabs-two-tabContent">
                    <div class="tab-pane fade show active" id="custom-tabs-two-op" role="tabpanel" aria-labelledby="custom-tabs-two-op-tab">
                        <div class="row">
                            <div class="col-sm-2">
                                <label for="daily-report-time">Daily Report Time:</label>
                                <input type="time" id="txtdailyReportTime" name="dailyReportTime" class="form-control" />
                            </div>
                            </div>
                        <hr>
                        <hr>
                            <div class="row">
                           
                            <div class="col-sm-2">
                                <label for="weekly-report-time">Weekly Report Day:</label>
                                <select id="ddlWeeklyReportDay" name="ddlWeeklyReportDay" class="form-control">
                                    <option value="Mon">Monday</option>
                                    <option value="Tue">Tuesday</option>
                                    <option value="Wed">Wednesday</option>
                                    <option value="Thu">Thursday</option>
                                    <option value="Fri">Friday</option>
                                    <option value="Sat">Saturday</option>
                                    <option value="Sun">Sunday</option>
                                </select>
                            </div>
                            <div class="col-sm-2">


                                <label for="weekly-report-time">Weekly Report Time:</label>
                                <input type="time" id="txtweeklyReportTme" name="weeklyReportTime" placeholder="HH:mm" class="form-control" />
                            </div>


                        </div>
                        <br/>
                        <div class="row">
                            <div class="col-sm-2 col-lg-2">
                                <button type="button" class="btn btn-block btn-primary" onclick="save();">Submit</button>
                            </div>
                        </div>

                    </div>

                </div>
            </div>
        </div>

        <!--<div class="card-footer">
            Footer
        </div>-->


    </section>

</div>
<!-- /.content-wrapper -->
<script src="~/Content/theme/plugins/jquery/jquery.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

<!--Date Range -->
<script src="~/Content/theme/plugins/moment/moment.min.js"></script>
<script src="~/Content/theme/plugins/multiple-select/dist/multiple-select.min.js" defer></script>
<script src="~/Content/theme/plugins/inputmask/jquery.inputmask.min.js"></script>
<script src="~/Content/theme/plugins/daterangepicker/daterangepicker.js" defer></script>
<script src="~/Content/theme/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>


<!-- DataTables  & Plugins -->
<script src="~/Content/theme/plugins/datatables/jquery.dataTables.min.js"></script>
<script src="~/Content/theme/plugins/datatables/jquery.dataTables.js" defer></script>
<script src="~/Content/theme/plugins/datatables-buttons/js/dataTables.buttons.min.js" defer></script>
<script src="~/Content/theme/plugins/jszip/jszip.min.js" defer></script>
<script src="~/Content/theme/plugins/datatables-buttons/js/buttons.html5.min.js" defer></script>
<script src="~/Content/theme/plugins/datatables-buttons/js/buttons.colVis.min.js" defer></script>
<script src="~/Content/theme/plugins/jszip/jszip.min.js" defer></script>
<script src="~/Content/theme/plugins/pdfmake/pdfmake.min.js" defer></script>
<script src="~/Content/theme/plugins/datatables-buttons/js/buttons.colVis.min.js" defer></script>

<script>
    function save(){
        var data1 = { 'dailyReportTime': $("#txtdailyReportTime").val(), 'weeklyReportTime': $("#txtweeklyReportTme").val(), 'WeeklyReportDay': $("#ddlWeeklyReportDay").val() };
        var data2 = JSON.stringify(data1);
        $.ajax({
            // type: "POST",
            //url: '/Home/UpdateReportTimes',
            //data: data2,            
            //contentType: "application/json; charset=utf-8",
            //datatype: "JSON",

            type: "GET",
            url: '@Url.Action("UpdateReportTimes", "Home")' + '?dailyReportTime=' + $("#txtdailyReportTime").val() + '&weeklyReportTime=' + $("#txtweeklyReportTme").val() + '&WeeklyReportDay=' + $("#ddlWeeklyReportDay").val(),
            contentType: "application/json; charset=utf-8",
            datatype: "JSON",
            success: function (result, status, xhr) {

            alert("Saved");
                window.location = "/Home/SetReportTimes";
            },
            error: function (error) {
                console.log(error)
                   alert("Saved");
                window.location = "/Home/SetReportTimes";
           
            }
        })
    }
</script>